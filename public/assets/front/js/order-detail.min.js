window.dataIndividu=[],window.dataTeam=[],window.dataMixTeam=[],window.dataOfficial=[];const createS2ListCity=(a,i="",e="",t="")=>{initiateS2(a,`${base_url}/api/s2-get-city${e?"/"+e:""}${t?"/"+t:""}`,0,cityDistrictProfileDefaultOption,["name"],function(a){let i=`data${capitalizeFirstLetter(a.target.dataset.contentfor)}`;window[i][a.target.dataset.idx].city=a.params.data.name,window[i][a.target.dataset.idx].city_id=a.params.data.id,console.log("dataIdv:",window[i][a.target.dataset.idx])},function(a){return{q:a.term}},null,null,!1),i&&$(a).select2("trigger","select",{data:i})},createS2ListCountry=(a,i="")=>{initiateS2(a,`${base_url}/api/s2-get-country`,0,countryProfileDefaultOption,["name"],function(a){let i=`data${capitalizeFirstLetter(a.target.dataset.contentfor)}`;$(`#profile_city_${a.target.dataset.contentfor}${a.target.dataset.idx}`).empty().trigger("change"),window[i][a.target.dataset.idx].country_name=a.params.data.name,window[i][a.target.dataset.idx].county_id=a.params.data.id,createS2ListCity(`#profile_city_${a.target.dataset.contentfor}${a.target.dataset.idx}`,"",a.params.data.id)},function(a){return{q:a.term}},null,null,!1),i&&$(a).select2("trigger","select",{data:i})},handlerMapSelect2Individu=a=>{for(let i=0;i<a.length;i++)initiateSelect2DynamicOptionCreation(`#name_individu${a[i]}`,`${base_url}/customer/list-participants`,0,"Silahkan Pilih Participant",["text"],function(a){let i="male";a?.params?.data?.gender&&(["m","male","pria"].includes(a.params.data.gender.toLowerCase())&&(i="male"),["f","female","wanita"].includes(a.params.data.gender.toLowerCase())&&(i="female")),window.dataIndividu[a.target.dataset.idx].user_id=a.params.data.id,window.dataIndividu[a.target.dataset.idx].city=a.params.data.city,window.dataIndividu[a.target.dataset.idx].city_id=a.params.data.city_id,window.dataIndividu[a.target.dataset.idx].user_full_name=a.params.data.text,window.dataIndividu[a.target.dataset.idx].country_name=a.params.data.country,window.dataIndividu[a.target.dataset.idx].county_id=a.params.data.county_id,window.dataIndividu[a.target.dataset.idx].user_gender=i,window.dataIndividu[a.target.dataset.idx].birthdate=a.params.data.birthdate,$(`#gender_individu${a.target.dataset.idx}`).val(i),$(`#birth_date_individu${a.target.dataset.idx}`).val(a.params.data.birthdate),$(`#profile_country_individu${a.target.dataset.idx}`).empty().trigger("change"),$(`#profile_city_individu${a.target.dataset.idx}`).empty().trigger("change"),createS2ListCity(`#profile_city_individu${a.target.dataset.idx}`,"",""),a.params.data.county_id&&($(`#profile_country_individu${a.target.dataset.idx}`).select2("trigger","select",{data:{id:a.params.data.county_id,text:a.params.data.country}}),createS2ListCity(`#profile_city_individu${a.target.dataset.idx}`,a.params.data.city_id?{id:a.params.data.city_id,text:a.params.data.city}:"",a.params.data.county_id))},function(a){return{q:a.term}},null,null,!1),createS2ListCountry(`#profile_country_individu${i}`,window.dataIndividu[i].county_id?{id:window.dataIndividu[i].county_id,text:window.dataIndividu[i].country}:""),createS2ListCity(`#profile_city_individu${i}`,window.dataIndividu[i].city_id?{id:window.dataIndividu[i].city_id,text:window.dataIndividu[i].city_name}:"",window.dataIndividu[i]?.county_id?window.dataIndividu[i].county_id:"")},handlerChooseGender=(a,i)=>{let e=`data${capitalizeFirstLetter(a)}`,t=$(`#gender_${a}${i}`).val();window[e][i].user_gender=t},handlerBirthDate=(a,i)=>{let e=$(`#birth_date_${a}${i}`).val(),t=`data${capitalizeFirstLetter(a)}`;window[t][i].birthdate=e},generateViewIndividu=()=>{let a=window.dataIndividu;if(a.length<1)return $("#individu_section").addClass("d-none");$("#individu_section").removeClass("d-none");let i="",e=[];a?.map((a,t)=>{let d="M";a.user_gender&&(["m","male","pria"].includes(a.user_gender.toLowerCase())&&(d="M"),["f","female","wanita"].includes(a.user_gender.toLowerCase())&&(d="F")),e.push(t),i+=`
        <div class="card">
          <div class="card-header bg-primary-1 text-white text-left collapsed cursor-pointer"
              id="participant_individu${t}"
              data-toggle="collapse"
              data-target="#collapse_participant_${t}"
              aria-expanded="false"
              aria-controls="collapse_participant_${t}">
              ${titleIndividuAccordion} ${t+1}
          </div>
          <div id="collapse_participant_${t}"
              class='collapse ${0==t?"show":""}'
              aria-labelledby="participant_individu${t}"
              data-parent="#accordionParticipant">
              <div class="card-body">
                <div class="row">
                  <div class="col-12 form-group">
                      <label for="name_individu${t}">
                          ${fullNameLabel}*
                      </label>
                      <select data-idx="${t}" data-contentFor="individu" name="name_individu[]"
                      id="name_individu${t}" style="width:100%" class="form-control w-100">
                      </select>
                  </div>
                  <div class="col-12 col-lg-6 form-group">
                      <label
                          for="gender_individu${t}">
                          ${genderLabel}*
                      </label>
                      <select class="form-select" id="gender_individu${t}" data-idx="${t}"
                      data-contentFor="individu" name="gender_individu[]" value="${d}"
                      onchange="handlerChooseGender('individu',${t})">
                          <option value="M">
                            ${genderMaleLang}
                          </option>
                          <option value="F">
                            ${genderFemaleLang}
                          </option>
                      </select>
                  </div>
                  <div class="col-12 col-lg-6 form-group">
                      <label
                          for="birth_date_individu${t}">
                          ${birthDateLabel}*
                      </label>
                      <input type="date" class="form-control" data-contentFor="individu"
                          id="birth_date_individu${t}"
                          name="birth_date_individu[]" data-idx="${t}"
                          placeholder="${birthDatePlaceholder}"
                          value="${a.birthDate?a.birthdate:""}"
                          onchange="handlerBirthDate('individu',${t})"
                          max="${new Date().toISOString().split("T")[0]}" required>
                  </div>
                  <div
                      class="col-12 col-lg-6 form-group d-flex flex-column gap-2
                      content-profile-country-individu-${t}">
                      <label
                          for="profile_country_individu${t}">
                          ${countryProfileLabel}*
                      </label>
                      <select
                          class="form-select" data-contentFor="individu" id="profile_country_individu${t}"
                          name="profile_country_individu[]" data-idx="${t}" required>
                      </select>
                  </div>
                  <div
                      class="col-12 col-lg-6 d-flex flex-column gap-2 form-group
                      content-profile-city-individu-${t}">
                      <label for="profile_city_individu${t}">
                          ${cityDistrictProfileLabel}*
                      </label>
                      <select
                          data-idx="${t}"
                          data-contentFor="individu"
                          class="form-select"
                          id="profile_city_individu${t}"
                          name="profile_city_individu[]" required>
                      </select>
                  </div>

                </div>
              </div>
          </div>
        </div>
      `}),$("#form_individu").append(`
    <div class="accordion" id="accordionParticipant">
      ${i}
    </div>
  `),handlerMapSelect2Individu(e)},generateViewTeam=()=>{let a=window.dataTeam;if(a.length<1)return $("#team_section").addClass("d-none");$("#team_section").removeClass("d-none"),a?.map((a,i)=>{})},generateViewMixTeam=()=>{let a=window.dataMixTeam;if(a.length<1)return $("#mix_team_section").addClass("d-none");$("#mix_team_section").removeClass("d-none"),a?.map((a,i)=>{})},generateViewOfficial=()=>{let a=window.dataOfficial;if(a.length<1)return $("#official_section").addClass("d-none");$("#official_section").removeClass("d-none");let i="";a?.map((a,e)=>{i+=`
        <div class="card">
          <div class="card-header bg-primary-1 text-white text-left collapsed cursor-pointer"
              id="participant_individu${e}"
              data-toggle="collapse"
              data-target="#collapse_official_${e}"
              aria-expanded="false"
              aria-controls="collapse_official_${e}">
              ${titleOfficialAccordion} ${e+1}
          </div>
          <div id="collapse_official_${e}"
              class='collapse ${0==e?"show":""}'
              aria-labelledby="participant_individu${e}"
              data-parent="#accordionParticipant">
              <div class="card-body">
                <div class="row">
                  <div class="col-12 form-group">
                      <label for="name_official{{ $i }}">
                          ${fullNameLabel}*
                      </label>
                      <input type="text" class="form-control" id="name_official${e}" name="name_official[]" placeholder="${fullNamePlaceholder}" required>
                  </div>
                  <div class="col-12 col-lg-6 form-group">
                      <label
                          for="gender_official${e}">
                          ${genderLabel}*
                      </label>
                      <select class="form-select"
                          id="gender_official${e}"
                          name="gender_official[]">
                          <option value="male" selected>
                            ${genderMaleLang}
                          </option>
                          <option value="female">
                            ${genderFemaleLang}
                          </option>
                      </select>
                  </div>
                  <div class="col-12 col-lg-6 form-group">
                      <label
                          for="birth_date_official${e}">
                          ${birthDateLabel}*
                      </label>
                      <input type="date" class="form-control"
                          id="birth_date_official${e}"
                          name="birth_date_official[]"
                          placeholder="${birthDatePlaceholder}"
                          max="${new Date().toISOString().split("T")[0]}" required>
                  </div>
                  <div
                      class="col-12 col-lg-6 form-group d-flex flex-column gap-2 content-profile-country-individu-${e}">
                      <label
                          for="profile_country_official${e}">
                          ${countryProfileLabel}*
                      </label>
                      <select
                          class="form-select js-example-basic-single"
                          id="profile_country_official${e}"
                          name="profile_country_official[]"
                          onchange="handlerProfileCountry(${e})"
                          required>
                          <option value="" selected disabled>
                              ${countryProfileDefaultOption}
                          </option>
                      </select>
                  </div>
                  <div
                      class="col-12 col-lg-6 d-flex flex-column gap-2 form-group content-profile-city-individu-${e}">
                      <label
                          for="profile_city_official${e}">
                          ${cityDistrictProfileLabel}*
                      </label>
                      <select
                          class="form-select js-example-basic-single"
                          id="profile_city_official${e}"
                          name="profile_city_official[]" required>
                          <option value="" selected disabled>
                              ${cityDistrictProfileDefaultOption}
                          </option>
                      </select>
                  </div>
                </div>
              </div>
          </div>
        </div>
      `}),$("#form_official").append(`
      <div class="accordion" id="accordionExampleOfficial">
        ${i}
      </div>
    `)},handlerBack=(a,i)=>{window.location.replace(`${base_url}/event/${a}/${i}`)};$(document).ready(function(){$.ajax({url:`${base_url}/get-data-form-order-tournament?checkoutID=${checkoutID}`,method:"GET",contentType:!1,success:function(a){let{data:i}=a;window.dataIndividu=i.ticket_detail_individu_order,window.dataTeam=i.ticket_detail_team_order,window.dataMixTeam=i.ticket_detail_mix_team_order,window.dataOfficial=i.ticket_detail_official_order,generateViewIndividu(),generateViewTeam(),generateViewMixTeam(),generateViewOfficial()},error:function(a){console.log("error:",a.responseJson)}})});
